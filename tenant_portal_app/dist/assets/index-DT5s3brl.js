import{j as e,r as d}from"./react-vendor-Cz9WDxg-.js";import{P as _}from"./PageHeader-mjJTmpC5.js";import{e as E,i as b,u as T,b as y,c as p,a as x,q as I,r as N,d as L,m as M,f as k,g as O,h as B,s as D,l as S,t as U,j as V}from"./nextui-vendor-BpFfdwSS.js";import{X as F,d as W,P as H,W as v,o as G,v as R,U as z,n as Q}from"./lucide-icons-D0L7Z31B.js";import{f as h}from"./utils-vendor-9uJw-9S8.js";import"./vendor-BVwjo9X5.js";import"./framer-motion-hFs7l1RU.js";const K=a=>{const r=a.toUpperCase().replace(/[_\s]/g,"");return["ACTIVE","COMPLETED","APPROVED","PAID","SUCCESS","DELIVERED","CONFIRMED"].includes(r)?"success":["PENDING","INPROGRESS","PROCESSING","REVIEW","WAITING","SCHEDULED","PARTIAL"].includes(r)?"warning":["FAILED","ERROR","REJECTED","CANCELLED","OVERDUE","EXPIRED","TERMINATED","BLOCKED"].includes(r)?"danger":["NEW","DRAFT","CREATED","ASSIGNED","OFFERED","RENEWAL"].includes(r)?"primary":["CLOSED","ARCHIVED","INACTIVE","DISABLED","HIDDEN"].includes(r)?"secondary":"default"},J=a=>a.toLowerCase().replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()),X=({status:a,variant:r="flat",size:i="sm",className:m=""})=>{const n=K(a),g=J(a);return e.jsx(E,{color:n,variant:r,size:i,className:m,children:g})},Y=({placeholder:a="Search...",value:r="",onSearch:i,onClear:m,debounceMs:n=300,size:g="md",className:w="",isClearable:f=!0})=>{const[o,t]=d.useState(r);d.useEffect(()=>{const u=setTimeout(()=>{i(o)},n);return()=>clearTimeout(u)},[o,i,n]),d.useEffect(()=>{t(r)},[r]);const l=()=>{t(""),m&&m()};return e.jsx(b,{size:g,placeholder:a,value:o,onChange:u=>t(u.target.value),startContent:e.jsx(W,{className:"w-4 h-4 text-foreground-400","aria-hidden":"true"}),"aria-label":a,endContent:f&&o?e.jsx("button",{type:"button",onClick:l,className:"text-foreground-400 hover:text-foreground-600","aria-label":"Clear search",children:e.jsx(F,{className:"w-4 h-4"})}):null,className:w})},Z=[{id:1,title:"Leaky faucet in kitchen",description:"The kitchen faucet has been dripping constantly for the past 3 days. Water is pooling under the sink.",status:"in_progress",priority:"high",category:"Plumbing",createdAt:"2025-11-03T10:30:00",scheduledDate:"2025-11-06T09:00:00",unit:"2B",property:"Maple Street Apartments",assignedContractor:{name:"John Smith",phone:"(555) 123-4567",company:"Quick Fix Plumbing"},notes:["Technician contacted","Parts ordered"]},{id:2,title:"AC not cooling properly",description:"Air conditioning unit runs but does not cool the apartment. Temperature remains above 78°F.",status:"pending",priority:"medium",category:"HVAC",createdAt:"2025-11-04T14:15:00",unit:"2B",property:"Maple Street Apartments"},{id:3,title:"Broken window lock",description:"Living room window lock is broken and window won't stay closed properly.",status:"completed",priority:"medium",category:"Repair",createdAt:"2025-10-28T11:00:00",completedDate:"2025-10-30T15:30:00",unit:"2B",property:"Maple Street Apartments",assignedContractor:{name:"Mike Johnson",phone:"(555) 987-6543",company:"General Repairs Inc"}}],$=["Plumbing","Electrical","HVAC","Appliance","Structural","Pest Control","Locks & Security","Other"],q=[{value:"low",label:"Low - Can wait"},{value:"medium",label:"Medium - Within a week"},{value:"high",label:"High - Within 2-3 days"},{value:"emergency",label:"Emergency - Immediate attention"}],le=()=>{const[a,r]=d.useState(Z),[i,m]=d.useState(""),[n,g]=d.useState("all"),{isOpen:w,onOpen:f,onClose:o}=T(),[t,l]=d.useState({title:"",description:"",category:"",priority:"medium",preferredDate:"",preferredTime:""}),u=d.useMemo(()=>{let s=a;return n!=="all"&&(s=s.filter(c=>c.status===n)),i&&(s=s.filter(c=>c.title.toLowerCase().includes(i.toLowerCase())||c.description.toLowerCase().includes(i.toLowerCase())||c.category.toLowerCase().includes(i.toLowerCase()))),s.sort((c,C)=>new Date(C.createdAt).getTime()-new Date(c.createdAt).getTime())},[a,n,i]),A=()=>{const s={id:a.length+1,title:t.title,description:t.description,category:t.category,priority:t.priority,status:"pending",createdAt:new Date().toISOString(),unit:"2B",property:"Maple Street Apartments"};r([s,...a]),l({title:"",description:"",category:"",priority:"medium",preferredDate:"",preferredTime:""}),o()},P=s=>{switch(s){case"emergency":return"danger";case"high":return"warning";case"medium":return"primary";default:return"default"}},j=d.useMemo(()=>({total:a.length,pending:a.filter(s=>s.status==="pending").length,in_progress:a.filter(s=>s.status==="in_progress").length,completed:a.filter(s=>s.status==="completed").length}),[a]);return e.jsxs("div",{className:"section",children:[e.jsx(_,{title:"Maintenance Requests",subtitle:"Submit and track maintenance requests for your unit",actions:e.jsx(y,{color:"primary",startContent:e.jsx(H,{className:"w-4 h-4"}),onPress:f,children:"Submit Request"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{className:"shadow-medium",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground-500",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:j.total})]}),e.jsx(v,{className:"w-8 h-8 text-primary"})]})})}),e.jsx(p,{className:"shadow-medium",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground-500",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-warning",children:j.pending})]}),e.jsx(G,{className:"w-8 h-8 text-warning"})]})})}),e.jsx(p,{className:"shadow-medium",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground-500",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:j.in_progress})]}),e.jsx(v,{className:"w-8 h-8 text-primary"})]})})}),e.jsx(p,{className:"shadow-medium",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground-500",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-success",children:j.completed})]}),e.jsx(R,{className:"w-8 h-8 text-success"})]})})})]}),e.jsx("div",{className:"flex gap-4 items-center",children:e.jsx("div",{className:"flex-1",children:e.jsx(Y,{value:i,onSearch:m,placeholder:"Search requests..."})})}),e.jsxs(I,{selectedKey:n,onSelectionChange:s=>g(s),variant:"underlined",color:"primary",children:[e.jsx(N,{title:"All Requests"},"all"),e.jsx(N,{title:"Pending"},"pending"),e.jsx(N,{title:"In Progress"},"in_progress"),e.jsx(N,{title:"Completed"},"completed")]}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx(p,{className:"shadow-medium",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-4 text-foreground-300"}),e.jsx("p",{className:"text-foreground-500",children:"No maintenance requests found"}),e.jsx(y,{color:"primary",variant:"flat",className:"mt-4",onPress:f,children:"Submit Your First Request"})]})}):u.map(s=>e.jsxs(p,{className:"shadow-medium",children:[e.jsx(L,{className:"flex-col items-start px-6 pt-6 pb-3",children:e.jsxs("div",{className:"flex w-full items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["#",s.id," ",s.title]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(E,{size:"sm",variant:"flat",children:s.category}),e.jsx(E,{size:"sm",color:P(s.priority),variant:"flat",children:s.priority.toUpperCase()}),e.jsx(X,{status:s.status})]})]}),e.jsxs("div",{className:"text-right text-sm text-foreground-500",children:[e.jsx("p",{children:"Submitted"}),e.jsx("p",{className:"font-medium",children:h(new Date(s.createdAt),"MMM d, yyyy")}),e.jsx("p",{children:h(new Date(s.createdAt),"h:mm a")})]})]})}),e.jsx(x,{className:"px-6 pt-0 pb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-foreground-600",children:s.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700 mb-2",children:"Property Details"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-foreground-600",children:[e.jsx("span",{className:"font-medium",children:"Property:"})," ",s.property]}),e.jsxs("p",{className:"text-foreground-600",children:[e.jsx("span",{className:"font-medium",children:"Unit:"})," ",s.unit]})]})]}),s.assignedContractor&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground-700 mb-2 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Assigned Contractor"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-foreground-600",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.assignedContractor.name]}),e.jsxs("p",{className:"text-foreground-600",children:[e.jsx("span",{className:"font-medium",children:"Company:"})," ",s.assignedContractor.company]}),e.jsxs("p",{className:"text-foreground-600",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",s.assignedContractor.phone]})]})]}),s.scheduledDate&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground-700 mb-2 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Scheduled Visit"]}),e.jsx("p",{className:"text-foreground-600",children:h(new Date(s.scheduledDate),"EEEE, MMM d, yyyy")}),e.jsx("p",{className:"text-foreground-600",children:h(new Date(s.scheduledDate),"h:mm a")})]}),s.completedDate&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground-700 mb-2 flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Completed"]}),e.jsx("p",{className:"text-foreground-600",children:h(new Date(s.completedDate),"MMM d, yyyy")}),e.jsx("p",{className:"text-foreground-600",children:h(new Date(s.completedDate),"h:mm a")})]})]}),s.notes&&s.notes.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700 mb-2",children:"Updates"}),e.jsx("div",{className:"bg-default-100 rounded-lg p-3 space-y-1",children:s.notes.map((c,C)=>e.jsxs("p",{className:"text-sm text-foreground-600",children:["• ",c]},C))})]})]})})]},s.id))}),e.jsx(M,{isOpen:w,onClose:o,size:"2xl",scrollBehavior:"inside",children:e.jsxs(k,{children:[e.jsx(O,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Submit Maintenance Request"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Request Title",placeholder:"Brief description of the issue",value:t.title,onChange:s=>l({...t,title:s.target.value}),isRequired:!0}),e.jsx(D,{label:"Category",placeholder:"Select category",selectedKeys:t.category?[t.category]:[],onChange:s=>l({...t,category:s.target.value}),isRequired:!0,children:$.map(s=>e.jsx(S,{value:s,children:s},s))}),e.jsx(D,{label:"Priority",placeholder:"Select priority level",selectedKeys:[t.priority],onChange:s=>l({...t,priority:s.target.value}),isRequired:!0,children:q.map(s=>e.jsx(S,{value:s.value,children:s.label},s.value))}),e.jsx(U,{label:"Description",placeholder:"Provide detailed information about the issue...",value:t.description,onChange:s=>l({...t,description:s.target.value}),minRows:4,isRequired:!0}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(b,{type:"date",label:"Preferred Date (Optional)",value:t.preferredDate,onChange:s=>l({...t,preferredDate:s.target.value})}),e.jsx(b,{type:"time",label:"Preferred Time (Optional)",value:t.preferredTime,onChange:s=>l({...t,preferredTime:s.target.value})})]}),e.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-foreground-600",children:[e.jsx("strong",{children:"Note:"})," Emergency requests will be prioritized and addressed within 24 hours. For non-emergency issues, please allow 2-5 business days for scheduling."]})})]})}),e.jsxs(V,{children:[e.jsx(y,{variant:"flat",onPress:o,children:"Cancel"}),e.jsx(y,{color:"primary",onPress:A,isDisabled:!t.title||!t.description||!t.category,children:"Submit Request"})]})]})})]})};export{le as MaintenancePage};
