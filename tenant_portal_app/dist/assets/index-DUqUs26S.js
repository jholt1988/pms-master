import{b as ae,r as t,j as e}from"./react-vendor-Cz9WDxg-.js";import{s as r,b as a,a as n,f as l,e as h}from"./shadows-D7BBuQ5e.js";import{a as D}from"./apiClient-DATCuIGb.js";import{v as le,p as re,B as ie,U as ne}from"./lucide-icons-D0L7Z31B.js";import{n as oe,c,a as u,d as g,k as m,s as I,l as k,i as o,t as q,e as de,b as ce}from"./nextui-vendor-BpFfdwSS.js";import"./vendor-BVwjo9X5.js";import"./framer-motion-hFs7l1RU.js";const be=()=>{const Y=ae(),[x,U]=t.useState([]),[d,$]=t.useState(""),[S,B]=t.useState([]),[p,O]=t.useState(""),[N,H]=t.useState(""),[z,L]=t.useState(""),[C,M]=t.useState(""),[w,K]=t.useState(""),[y,T]=t.useState(""),[b,G]=t.useState(""),[f,J]=t.useState(""),[R,Q]=t.useState(""),[P,V]=t.useState(""),[_,X]=t.useState(""),[Z,j]=t.useState(!0),[A,v]=t.useState(null),[ee,se]=t.useState(!1),[E,F]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const i=await D("/properties/public");U(i)}catch(i){v(i.message)}finally{j(!1)}})()},[]),t.useEffect(()=>{if(d){const s=x.find(i=>i.id===Number(d));s&&B(s.units)}},[d,x]);const te=async s=>{s.preventDefault(),j(!0),F(!0),v(null),se(!1);try{await D("/rental-applications",{method:"POST",body:{propertyId:Number(d),unitId:Number(p),fullName:N,email:z,phoneNumber:C,income:parseFloat(w),employmentStatus:P,previousAddress:_,creditScore:y?Number(y):void 0,monthlyDebt:b?Number(b):void 0,bankruptcyFiledYear:f?Number(f):void 0,rentalHistoryComments:R||void 0}});const i=data?.id||"APP-"+Date.now().toString().slice(-6);Y(`/rental-application/confirmation?id=${i}`)}catch(i){v(i.message),j(!1),F(!1)}};if(Z)return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(oe,{size:"lg",label:"Loading properties..."})});const W=S.find(s=>s.id===Number(p));return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",style:{padding:r[6]},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{style:{fontSize:l["3xl"],fontWeight:n.bold,color:a.neutral[900],marginBottom:r[2]},children:"Rental Application"}),e.jsx("p",{style:{fontSize:l.base,color:a.neutral[600]},children:"Complete the form below to apply for your new home"})]}),ee&&e.jsx(c,{className:"mb-6",style:{backgroundColor:a.success[50],border:`1px solid ${a.success[200]}`},children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{size:24,style:{color:a.success[600]}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:l.base,fontWeight:n.semibold,color:a.success[900]},children:"Application submitted successfully!"}),e.jsx("p",{style:{fontSize:l.sm,color:a.success[700]},children:"We'll review your application and contact you soon."})]})]})})}),A&&e.jsx(c,{className:"mb-6",style:{backgroundColor:a.danger[50],border:`1px solid ${a.danger[200]}`},children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(re,{size:24,style:{color:a.danger[600],flexShrink:0}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:l.base,fontWeight:n.semibold,color:a.danger[900]},children:"Error submitting application"}),e.jsx("p",{style:{fontSize:l.sm,color:a.danger[700]},children:A})]})]})})}),e.jsxs("form",{onSubmit:te,className:"space-y-6",children:[e.jsxs(c,{shadow:"sm",style:{boxShadow:h.card},children:[e.jsx(g,{style:{padding:r[4]},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:20,style:{color:a.primary[600]}}),e.jsx("h2",{style:{fontSize:l.lg,fontWeight:n.semibold},children:"Property Information"})]})}),e.jsx(m,{}),e.jsxs(u,{style:{padding:r[4]},className:"space-y-4",children:[e.jsx(I,{label:"Select Property",placeholder:"Choose a property",selectedKeys:d?[d]:[],onChange:s=>$(s.target.value),isRequired:!0,variant:"bordered",size:"lg",children:x.map(s=>e.jsxs(k,{value:s.id,children:[s.name," - ",s.address]},s.id))}),e.jsx(I,{label:"Select Unit",placeholder:"Choose a unit",selectedKeys:p?[p]:[],onChange:s=>O(s.target.value),isRequired:!0,isDisabled:!d,variant:"bordered",size:"lg",description:W?.rent?`Rent: $${W.rent}/month`:void 0,children:S.map(s=>e.jsx(k,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs(c,{shadow:"sm",style:{boxShadow:h.card},children:[e.jsx(g,{style:{padding:r[4]},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{size:20,style:{color:a.primary[600]}}),e.jsx("h2",{style:{fontSize:l.lg,fontWeight:n.semibold},children:"Personal Information"})]})}),e.jsx(m,{}),e.jsxs(u,{style:{padding:r[4]},className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-1",children:e.jsx(o,{label:"Full Name",placeholder:"Enter your full legal name",value:N,onChange:s=>H(s.target.value),isRequired:!0,variant:"bordered",size:"lg"})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(o,{type:"email",label:"Email Address",placeholder:"your.email@example.com",value:z,onChange:s=>L(s.target.value),isRequired:!0,variant:"bordered",size:"lg"}),e.jsx(o,{type:"tel",label:"Phone Number",placeholder:"(555) 123-4567",value:C,onChange:s=>M(s.target.value),isRequired:!0,variant:"bordered",size:"lg"})]}),e.jsx(q,{label:"Previous Address",placeholder:"Enter your current or most recent address",value:_,onChange:s=>X(s.target.value),isRequired:!0,variant:"bordered",minRows:3})]})]}),e.jsxs(c,{shadow:"sm",style:{boxShadow:h.card},children:[e.jsx(g,{style:{padding:r[4]},children:e.jsxs("div",{className:"flex items-between w-full",children:[e.jsx("h2",{style:{fontSize:l.lg,fontWeight:n.semibold},children:"Financial Information"}),e.jsx(de,{size:"sm",variant:"flat",color:"primary",children:"Required for approval"})]})}),e.jsx(m,{}),e.jsxs(u,{style:{padding:r[4]},className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(o,{type:"number",label:"Monthly Income",placeholder:"0.00",value:w,onChange:s=>K(s.target.value),isRequired:!0,variant:"bordered",size:"lg",startContent:e.jsx("div",{style:{color:a.neutral[400]},children:"$"})}),e.jsx(o,{label:"Employment Status",placeholder:"e.g., Full-time, Self-employed",value:P,onChange:s=>V(s.target.value),isRequired:!0,variant:"bordered",size:"lg"})]}),e.jsx(m,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{style:{fontSize:l.sm,fontWeight:n.medium,color:a.neutral[700]},children:"Optional Financial Details"}),e.jsx("p",{style:{fontSize:l.xs,color:a.neutral[500]},children:"Providing these details may help strengthen your application"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsx(o,{type:"number",label:"Credit Score",placeholder:"300-850",value:y,onChange:s=>T(s.target.value),variant:"bordered",min:300,max:850,description:"Optional"}),e.jsx(o,{type:"number",label:"Monthly Debt",placeholder:"0.00",value:b,onChange:s=>G(s.target.value),variant:"bordered",min:0,startContent:e.jsx("div",{style:{color:a.neutral[400]},children:"$"}),description:"Optional"}),e.jsx(o,{type:"number",label:"Bankruptcy Year",placeholder:"YYYY",value:f,onChange:s=>J(s.target.value),variant:"bordered",min:1900,max:new Date().getFullYear(),description:"If applicable"})]})]})]}),e.jsxs(c,{shadow:"sm",style:{boxShadow:h.card},children:[e.jsx(g,{style:{padding:r[4]},children:e.jsx("h2",{style:{fontSize:l.lg,fontWeight:n.semibold},children:"Additional Information"})}),e.jsx(m,{}),e.jsx(u,{style:{padding:r[4]},children:e.jsx(q,{label:"Rental History & References",placeholder:"Share information about previous landlords, references, or any additional context about your rental history...",value:R,onChange:s=>Q(s.target.value),variant:"bordered",minRows:4,description:"Optional but recommended"})})]}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(ce,{type:"submit",color:"primary",size:"lg",isLoading:E,style:{fontSize:l.base,fontWeight:n.semibold,paddingLeft:r[8],paddingRight:r[8]},children:E?"Submitting Application...":"Submit Application"})})]})]})};export{be as ApplicationPage};
