import{r as a,j as e}from"./react-vendor-Cz9WDxg-.js";import{u as w}from"./index-BHiZdJVs.js";import{a as E}from"./apiClient-DATCuIGb.js";import{u as M,M as C}from"./useMasterDetail-BdXesFbU.js";import{u as R}from"./useViewportCategory-ClZR3Wdj.js";import{g as S}from"./lucide-icons-D0L7Z31B.js";import{c as m,a as u,e as x,b as v,d as D}from"./nextui-vendor-BpFfdwSS.js";import"./vendor-BVwjo9X5.js";import"./utils-vendor-9uJw-9S8.js";import"./framer-motion-hFs7l1RU.js";const _=s=>{switch(s){case"PENDING":return"warning";case"IN_PROGRESS":return"primary";case"COMPLETED":return"success";default:return"default"}},I=s=>{switch(s){case"LOW":return"default";case"MEDIUM":return"primary";case"HIGH":return"warning";case"EMERGENCY":return"danger";default:return"default"}};function T(){const{token:s}=w(),[h,n]=a.useState([]),[p,c]=a.useState(!0),[l,i]=a.useState(null),{selectedItem:r,showDetail:f,selectItem:j,clearSelection:g}=M(),o=R(),d=a.useCallback(async()=>{c(!0),i(null);try{const t=await E("/maintenance",{token:s});n(t.data||[])}catch(t){n([]),i(t.message||"Failed to load maintenance requests")}finally{c(!1)}},[s]);a.useEffect(()=>{d()},[d]);const y=()=>{g()},N=e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Maintenance Requests"}),l&&e.jsx("p",{className:"text-danger",children:l}),p?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsx(m,{isPressable:!0,onPress:()=>j(t),children:e.jsxs(u,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold",children:t.title}),e.jsx(x,{color:_(t.status),size:"sm",children:t.status})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.unit.property.name," - ",t.unit.name]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsx(x,{color:I(t.priority),size:"sm",children:t.priority})]})]})},t.id))})]}),b=e.jsx("div",{className:"p-4 sm:p-6",children:r?e.jsxs(e.Fragment,{children:[(o==="mobile"||o==="tablet-portrait")&&e.jsx(v,{isIconOnly:!0,variant:"light",onClick:y,className:"mb-4",children:e.jsx(S,{size:20})}),e.jsxs(m,{children:[e.jsx(D,{children:e.jsx("h2",{className:"text-2xl font-bold",children:r.title})}),e.jsx(u,{children:e.jsx("p",{children:r.description})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"Select a request to see the details"})})});return e.jsx(C,{master:N,detail:b,showDetail:f})}export{T as default};
