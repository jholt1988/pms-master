const i=()=>"http://localhost:3001/api";async function h(n,t={}){const a=i(),r=n.startsWith("http")?n:`${a.replace(/\/$/,"")}${n.startsWith("/")?"":"/"}${n}`,s={"Content-Type":"application/json",...t.headers||{}};t.token&&(s.Authorization=`Bearer ${t.token}`);const e=await fetch(r,{method:t.method??"GET",headers:s,body:t.body&&!t.noJson?JSON.stringify(t.body):t.body});if(!e.ok){const c=await e.text();throw new Error(`${e.status} - ${c}`)}if(e.status===204)return null;const o=e.headers.get("content-type")||"";return t.noJson||!o.includes("application/json")?e:e.json()}export{h as a,i as g};
