import{f as j,b as y,r as t,j as e,L as u}from"./react-vendor-Cz9WDxg-.js";import{a as P}from"./apiClient-DATCuIGb.js";import"./vendor-BVwjo9X5.js";function S(){const[o]=j(),m=y(),[n,h]=t.useState(""),[r,x]=t.useState(""),[l,f]=t.useState(""),[i,a]=t.useState(null),[w,b]=t.useState(!1),[c,d]=t.useState(!1);t.useEffect(()=>{const s=o.get("token");s?h(s):a("Invalid reset link. Please check your email for the correct link.")},[o]);const g=async s=>{if(s.preventDefault(),a(null),r!==l){a("Passwords do not match");return}if(r.length<8){a("Password must be at least 8 characters long");return}d(!0);try{await P("/auth/reset-password",{method:"POST",body:{token:n,newPassword:r}}),b(!0),setTimeout(()=>{m("/login")},3e3)}catch(p){a(p.message||"An error occurred")}finally{d(!1)}};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-green-600",children:"Password Reset Successful"}),e.jsx("p",{className:"mb-4",children:"Your password has been reset successfully. Redirecting to login..."}),e.jsx(u,{to:"/login",className:"text-blue-500 hover:text-blue-800",children:"Go to Login"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Reset Password"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"newPassword",type:"password",placeholder:"Enter new password",value:r,onChange:s=>x(s.target.value),required:!0,minLength:8})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"confirmPassword",type:"password",placeholder:"Confirm new password",value:l,onChange:s=>f(s.target.value),required:!0,minLength:8})]}),i&&e.jsx("p",{className:"text-red-500 text-xs italic mb-4",children:i}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",type:"submit",disabled:c||!n,children:c?"Resetting...":"Reset Password"}),e.jsx(u,{to:"/login",className:"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800",children:"Back to Login"})]})]})]})})}export{S as default};
