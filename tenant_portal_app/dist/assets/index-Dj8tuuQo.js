import{r as a,R as u,j as e}from"./react-vendor-Cz9WDxg-.js";import{u as j}from"./index-BHiZdJVs.js";import{a as y}from"./apiClient-DATCuIGb.js";import"./vendor-BVwjo9X5.js";import"./nextui-vendor-BpFfdwSS.js";import"./framer-motion-hFs7l1RU.js";import"./utils-vendor-9uJw-9S8.js";import"./lucide-icons-D0L7Z31B.js";function C(){const{token:r}=j(),[n,h]=a.useState([]),[p,l]=a.useState(!0),[c,d]=a.useState(null),[t,i]=a.useState(null),o=u.useCallback(async()=>{if(!r){l(!1);return}l(!0),d(null);try{const s=await y("/inspections",{token:r});h(s.data||[])}catch(s){d(s.message||"Failed to load inspections")}finally{l(!1)}},[r]);a.useEffect(()=>{o()},[o]);const x=s=>{switch(s){case"SCHEDULED":return"bg-blue-100 text-blue-800";case"IN_PROGRESS":return"bg-yellow-100 text-yellow-800";case"COMPLETED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=s=>s.replace("_"," ").replace(/\b\w/g,g=>g.toUpperCase());return p?e.jsx("div",{className:"text-center py-8",children:"Loading inspections..."}):c?e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}):e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Unit Inspections"}),n.length===0?e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No inspections found for your unit."})}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>i(s),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:m(s.type)}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x(s.status)}`,children:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.unit.property.name," - ",s.unit.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",new Date(s.scheduledDate).toLocaleDateString()]}),s.completedDate&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Completed: ",new Date(s.completedDate).toLocaleDateString()]}),s.notes&&e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:s.notes})]}),s.photos.length>0&&e.jsxs("div",{className:"text-sm text-gray-500",children:[s.photos.length," photo",s.photos.length>1?"s":""]})]})},s.id))}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[m(t.type)," Inspection"]}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Property Information"}),e.jsxs("p",{className:"text-gray-600",children:[t.unit.property.name," - ",t.unit.name]}),e.jsx("p",{className:"text-sm text-gray-500",children:t.unit.property.address})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${x(t.status)}`,children:t.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Schedule"}),e.jsxs("p",{className:"text-gray-600",children:["Scheduled: ",new Date(t.scheduledDate).toLocaleString()]}),t.completedDate&&e.jsxs("p",{className:"text-gray-600",children:["Completed: ",new Date(t.completedDate).toLocaleString()]})]}),t.inspector&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Inspector"}),e.jsx("p",{className:"text-gray-600",children:t.inspector.username})]}),t.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Notes"}),e.jsx("p",{className:"text-gray-600",children:t.notes})]}),t.findings&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Findings"}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded text-sm overflow-x-auto",children:JSON.stringify(t.findings,null,2)})]}),t.photos.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Photos"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.photos.map(s=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.url,alt:s.caption||"Inspection photo",className:"w-full h-48 object-cover rounded border border-gray-200"}),s.caption&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.caption})]},s.id))})]})]})]})})})]})}export{C as InspectionPage};
